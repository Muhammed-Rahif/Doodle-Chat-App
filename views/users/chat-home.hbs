<div style="overflow-x: auto;" class="container-fluid h-100">
	<div class="row justify-content-center h-100">
		<div class="col-md-4 col-xl-3 chat">
			<div class="card mb-sm-3 mb-md-0 contacts_card">
				<div class="card-header">
					<p class="text-white">Room Name :
						{{#if user.room}}
						{{user.room}}
						{{else}}
						Room Name
						{{/if}}
					</p>
					<p class="text-white"><small>Members : </small></p>
				</div>
				<div class="card-body contacts_body">
					<ui class="contacts">
						<li class="active">
							<div class="d-flex bd-highlight">
								<div class="img_cont">
									<img src="/images/def-profile.png" class="rounded-circle user_img">
									<span class="online_icon"></span>
								</div>
								<div class="user_info">
									<span>{{user.name}}</span>
									<p>{{user.email}}</p>
								</div>
							</div>
						</li>
						<li>
							<div class="d-flex bd-highlight">
								<div class="img_cont">
									<img src="/images/def-profile.png" class="rounded-circle user_img">
									<span class="online_icon offline"></span>
								</div>
								<div class="user_info">
									<span>Taherah Big</span>
									<p>Taherah left 7 mins ago</p>
								</div>
							</div>
						</li>
					</ui>
				</div>
				<div class="card-footer"></div>
			</div>
		</div>
		<div class="col-md-8 col-xl-6 chat">
			<div class="card">
				<div class="card-header msg_head">
					<div class="d-flex bd-highlight">
						<div class="img_cont">
							<img src="/images/def-group.jpg" class="rounded-circle user_img">
							<span class="online_icon"></span>
						</div>
						<div class="user_info">
							{{#if user}}
							<span>{{user.room}}</span>
							<p>589 Online</p>
							{{else}}
							<span>----</span>
							<p>0000 Online</p>
							{{/if}}
						</div>
						{{!-- Video call and audio call icons --}}
						{{!-- <div class="video_cam">
							<span><i class="fas fa-video"></i></span>
							<span><i class="fas fa-phone"></i></span>
						</div> --}}
					</div>
					<div style="width: 12px;height: 12px;">
						<button style="background: transparent;border: transparent;outline: transparent;"
							id="action_menu_btn"><a style="text-decoration: none;" class="text-white" href="/logout"><i
										class="fas fa-sign-out-alt"></i></a></button>
					</div>
					{{!-- <div id="action-menu" class="action_menu">
						<ul>
							<li><i class="fas fa-user-circle"></i> View profile</li>
							<li><i class="fas fa-users"></i> Add to close friends</li>
							<li><i class="fas fa-plus"></i> Add to group</li>
							<li><a style="text-decoration: none;" class="text-white" href="/logout"><i
										class="fas fa-sign-out-alt"></i> Sign out</a></li>
						</ul>
					</div> --}}
				</div>
				<div id="card-body" class="card-body msg_card_body">
					<div class="d-flex justify-content-start mb-4">
						<div class="img_cont_msg">
							<img src="/images/def-profile.png" class="rounded-circle user_img_msg">
						</div>
						<div class="msg_cotainer">
							Hi, how are you samim?
							<span class="msg_time">8:40 AM, Today</span>
						</div>
					</div>
					<div class="d-flex justify-content-end mb-4">
						<div class="msg_cotainer_send">
							Hi Khalid i am good tnx how about you?
							<span class="msg_time_send">8:55 AM, Today</span>
						</div>
						<div class="img_cont_msg">
							<img src="/images/def-profile.png" class="rounded-circle user_img_msg">
						</div>
					</div>
				</div>
				<div class="card-footer">
					<div class="input-group">
						{{!-- document sending button --}}
						{{!-- <div class="input-group-append">
							<span class="input-group-text attach_btn"><i class="fas fa-paperclip"></i></span>
						</div> --}}
						<textarea name="" class="form-control type_msg" placeholder="Type your message..."></textarea>
						<div class="input-group-append">
							<span class="input-group-text send_btn"><i class="fas fa-location-arrow"></i></span>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<script src="https://cdn.socket.io/socket.io-3.0.1.min.js"></script>



<script>



	const socket = io();

	var userData = {};
	socket.on('connect', function () {
		userData.name = `{{user.name}}`;
		userData.room = `{{user.room}}`;
		userData.email = `{{user.email}}`;
		userData.id = socket.id;
		socket.emit('userConnected', userData)
	});

	socket.on('disconnect', function () {
		socket.emit('userDisconnected', userData)
	});

	socket.on('userConnect', (msg) => {
		$('#card-body').append(`<div class="tag">
						<p>${msg.name} is joined</p>
					</div>`);
	});

	socket.on('userDisconnect', (userName) => {
		console.log(userName);
		$('#card-body').append(`<div class="tag">
						<p>${userName} left</p>
					</div>`);
	});





</script>




<script>
	$("#action_menu_btn").focus(function () {
		$(".action_menu").css('display', 'block'); //show when user moves focus in the textarea
	});

	$("#action_menu_btn").on("change, blur", function () {
		setTimeout(function () {
			$(".action_menu").css('display', 'none'); //hide when user moves focus out of the textarea
		}, 200);
	});
</script>